{% extends "base.html" %}
{% load staticfiles %}
{% load bootstrap_tags %}

{% block head_js %}
<script type="text/javascript">
    Stripe.setPublishableKey = '{{ publishable }}';
</script>
<script type="text/javascript" src="{% static 'js/stripe.js' %}"></script>
{% endblock %}

{% block content %}
{% if messages %}
<div>
    {% for message in messages %}
    <p>{{ message }}</p>
    {% endfor %}
</div>
{% endif %}

<form method="POST" id="payment-form" action="{% url 'donations' %}">
    <legend>Payment Details</legend>
    <div id="card-errors">
        <div id="stripe-error-message"></div>
    </div>
    
    <div class="form-group">
        {{ donation_form|as_bootstrap }}
    </div>
    
    <div class="form-group">
        {{ payment_form|as_bootstrap }}
    </div>
    
    {% csrf_token %}
    <div class="form-group">
        <input class="btn btn-primary" id="submit_payment_btn" name="commit" type="submit" value="Submit Payment">
    </div>
</form>
{% endblock %}