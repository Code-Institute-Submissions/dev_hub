{% extends 'base.html' %}
{% load static from staticfiles %}
{% block content %}

<div>
    <p>Create a ticket here for any bugs you have found and we will fix them,
    check back to see if the has been updated.</p>
    {% if user.is_authenticated %}
    <a href="{% url 'create_ticket' %}">
        <button class="btn btn-primary">Create Ticket</button>
    </a>
    {% else %}
    <p>To create a ticket please <a href="{% url 'login' %}">Login</a></p>
    {% endif %}
</div>
<div class="row row-flex">
    {% for ticket in tickets %}
    <div class="col-10">
        <div class="row">
            <div class="col-8">
                <h6>{{ ticket.topic }}</h6>
                <h6>{{ ticket.title }}</h6>
                <p>{{ ticket.description }}</p>
                <p>{{ ticket.created_by }} on {{ ticket.date }}</p>
            </div>
            <div class="col-2">
                {{ ticket.upvotes }}
                {% if user.is_authenticated %}
                <a href="{% url 'upvote_ticket' ticket.id %}">
                    <button class="btn btn-primary">Upvote</button>
                </a>
                {% endif %}
            </div>
            <div class="col-2">
                <p>{{ ticket.status }}</p>
                {% if user == ticket.created_by or user.is_staff %}
                <a href="{% url 'edit_ticket' ticket.id %}">
                    <button class="btn btn-primary">Edit</button>
                </a>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}